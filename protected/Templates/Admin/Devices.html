{% extends 'Index.html' %}

{% block main %}
    <div class="row">
        <main class="devices">
            <div class="">
                <table class="table table-bordered cust-table-striped">
                    <thead>
                    <tr class="text-middle text-center">
                        <th class="bg-primary col-office" rowspan="">Офис</th>
                        <th class="bg-primary col-device" rowspan="">Оборудование<a class="btn btn-success btn-xs btn-custom pull-right" href="/modal/addAppliance" role="button" data-action="get-popup">добавить</a></th>
                        <th class="bg-primary" rowspan="">ПО</th>
                        <th class="bg-primary" rowspan="">hostname</th>
                        <th class="bg-primary" rowspan="">Модуль</th>
                        <th class="bg-primary" rowspan="">Комментарий</th>
                        <th class="bg-primary" rowspan="">Действия</th>
                    </tr>
                    </thead>
                    {% for office in offices %}
                        {% for appliance in office.appliances %}
                        <tbody>
                            <tr>
                                <td class="col-office cut-string" rowspan="{{ appliance.modules.count }}">{{ office.title }}</td>
                                <td class="col-device cut-string" rowspan="{{ appliance.modules.count }}">{{ appliance.platform.platform.vendor.title }} {{ appliance.platform.platform.title }}</td>
                                <td rowspan="{{ appliance.modules.count }}">{{ appliance.software.software.title }}</td>
                                <td rowspan="{{ appliance.modules.count }}">{{ appliance.details.hostname }}</td>
                                <td rowspan="">{{ appliance.modules.first.module.title }}</td>
                                <td rowspan="{{ appliance.modules.count }}">{{ appliance.comment }}</td>
                                <td class="col-actions" rowspan="{{ appliance.modules.count }}">
                                    <div class="pull-right">
                                        <a class="btn btn-success btn-xs" href="/modal/editAppliance?id={{ appliance.getPK }}"
                                           role="button" data-action="get-popup">
                                            Изменить
                                        </a>
                                        <a class="btn btn-danger btn-xs" href="/admin/delAppliance?id={{ appliance.getPK }}" role="button"
                                           data-action="delete">
                                            Удалить
                                        </a>
                                    </div>
                                </td>
                            </tr>
                        {% for module in appliance.modules|slice(1) %}
                            <tr>
                                <td>{{ module.module.title }}</td>
                            </tr>
                        {% endfor %}
                        </tbody>
                        {% endfor %}   {#appliances#}
                    {% endfor %}    {#offices#}

                </table>
            </div>
        </main>
    </div>
{% endblock %}

